include ../test

div.navbar
    button.btn.btn-primary(type="button" data-toggle="modal" data-target="#myModal") Test

div.container.table-responsive(ng-controller='ReportOverviewCtrl')

    mixin test

    table#results.table.table-striped.tablesorter
        thead
            tr
                th URL
                th Date
                th Build
                th Tag
                th.text-center Load time
                th.text-center YSlow
                th.text-center DomMonster
                th.text-center Validator
        tbody
            tr.warning
                td(data-sort="a")
                    a(href='#/report?build={{query.build}}',ng-if='query.url') {{query.url}}
                td
                td
                    a(href='#/report?url={{query.url}}',ng-if='query.build') {{query.build}}
                td
                td.text-center
                    span(class="label label-{{totals.time.class}}") {{totals.time.message}} ({{totals.time.score}}%)
                td.text-center
                    span(class="label label-{{totals.yslow.o.class}}") {{totals.yslow.o.message}} ({{totals.yslow.o.score}}%)
                td.text-center
                    span(class="label label-{{totals.dommonster.COMPOSITE_stats.class}}") {{totals.dommonster.COMPOSITE_stats.message}} ({{totals.dommonster.COMPOSITE_stats.score}}%)
                td.text-center

            tr(ng-repeat='r in results')
                td
                    a(href='#/report?url={{r.url}}&build={{query.build}}') {{r.url}}
                td {{r.timestamp | date:'shortDate'}}
                td
                    a(href='#/report?build={{r.build}}&url={{query.url}}') {{r.build}}
                td {{r.tag}}
                td(class='text-center grade{{r.metrics.yslow.grades.lt}}',ng-mouseover='popover($event,{name:"time",value : r.metrics.yslow.data.lt/1000})') {{r.metrics.yslow.grades.lt}}
                td(class='text-center grade{{r.metrics.yslow.grades.o}}')
                    a(href='#/report/yslow?{{queryString}}',ng-mouseover='popover($event,r.metrics.yslow)') {{r.metrics.yslow.grades.o}}
                td(class='text-center grade{{r.metrics.dommonster.grades.COMPOSITE_stats}}',ng-mouseover='popover($event,r.metrics.dommonster)') {{r.metrics.dommonster.grades.COMPOSITE_stats}}
                td(class='text-center grade{{r.metrics.validator.grades.COMPOSITE_info}}') {{r.metrics.validator.grades.COMPOSITE_info}}

            tr.warning
                td(data-sort="z")
                    a(href='#/report?build={{query.build}}',ng-if='query.url') {{query.url}}
                td
                td
                    a(href='#/report?url={{query.url}}',ng-if='query.build') {{query.build}}
                td
                td.text-center
                    span(class="label label-{{totals.time.class}}") {{totals.time.message}} ({{totals.time.score}}%)
                td.text-center
                    span(class="label label-{{totals.yslow.o.class}}") {{totals.yslow.o.message}} ({{totals.yslow.o.score}}%)
                td.text-center
                    span(class="label label-{{totals.dommonster.COMPOSITE_stats.class}}") {{totals.dommonster.COMPOSITE_stats.message}} ({{totals.dommonster.COMPOSITE_stats.score}}%)
                td.text-center

    div#popoverContent.ng-hide
        span(ng-if='popoverContent.name === "time"') {{popoverContent.value}} s
        ul.list-group(ng-if='popoverContent.tool === "yslow"')
            li.list-group-item.active Overall&nbsp;
                span(class='badge grade{{popoverContent.grades.o}}') {{popoverContent.grades.o}}
            li.list-group-item Page Size&nbsp;
                span(class='badge grade{{popoverContent.grades.w}}') {{popoverContent.grades.w}}
            li.list-group-item Page Size (cached)&nbsp;
                span(class='badge grade{{popoverContent.grades.w_c}}') {{popoverContent.grades.w_c}}
            li.list-group-item Requests&nbsp;
                span(class='badge grade{{popoverContent.grades.r}}') {{popoverContent.grades.r}}
            li.list-group-item Requests (cached)&nbsp;
                span(class='badge grade{{popoverContent.grades.r_c}}') {{popoverContent.grades.r_c}}
            li.list-group-item Inline JS/CSS&nbsp;
                span(class='badge grade{{popoverContent.grades.yminify}}') {{popoverContent.grades.yminify}}

        ul.list-group(ng-if='popoverContent.tool === "dommonster"')
            li.list-group-item.active Overall&nbsp;
                span(class='badge grade{{popoverContent.grades.COMPOSITE_stats}}') {{popoverContent.grades.COMPOSITE_stats}}

